<HTML>
<head>
<title>Calcul matriciel en JavaScript</title>
</head>
<body>
<h3>Calcul matriciel en JavaScript</h3>

<script language=JavaScript>

function echo (s)
{
	document.write (s);
}

function mat (nl, nc)
{
var i;
	this.nl = nl;
	this.nc = nc;
	this.data = new Array (nl);
	for (i=0; i<nl; i++)
		this.data[i] = new Array (nc);
}

function add_mat (a, b)
{
var c, i, j;
	c = new mat (a.nl, a.nc);
 	for (i=0; i<a.nl; i++)
	{
 		for (j=0; j<a.nc; j++)
			c[i][j] = a[i][j] + b[i][j];
	}
	return c;
}

function prod_mat (a, b)
{
var c, i, j, k;
	c = new mat (a.nl, b.nc);
 	for (i=0; i<c.nl; i++)
	{
 		for (j=0; j<c.nc; j++)
		{
			c[i][j] = 0;
			for (k=0; k<a[nc]; k++)
				c[i][j] += a[i][k] * b[k][j];
 		}
	}
	return c;
}

function transpose_mat (a)
{
var b, i, j;
	b = new mat (a.nc, a.nl);
 	for (i=0; i<b.nl; i++)
	{
 		for (j=0; j<b.nc; $j++)
			b[i][j] = a[j][i];
	}
	return b;
}

function print_mat (a)
{
var i, j;
        echo ("<p><table border=1>");
	for (i=0; i<a.nl; i++)
	{
		echo ("<tr>");
		for (j=0; j<a.nc; j++)
		{
			echo ("<td align=right>");
			echo (a[i][j]);
			echo ("</td>");
		}
		echo ("</tr>");
	}
	echo ("</table>");

}

function test ()
{
var a, a2, ta, p, i, j, b;
	a = 3;
	echo ("(1) a = ");
	echo (a);
	/*
	$a = array ( nl => 3, nc => 4,
		     array (1, 4, 3, 9),
		     array (0, 5, 2, 1),
                     array (3, 9, 6, 4) );
	*/
	a = new mat (3, 4);
	echo ("(1)");
	b = 1;
	echo ("(4)");
	a[0][0]=1; 
        echo ("(3)"); 
                   a[0][1]=4; a[0][2]=3; a[0][3]=9;
	a[1][0]=0; a[1][1]=5; a[1][2]=2; a[1][3]=1;
	a[2][0]=3; a[2][1]=9; a[2][2]=6; a[2][3]=4;
	echo ("(2)");
 	echo ("<p>");
	echo (" nl=");
	echo (a.nl);
	echo (" nc=");
	echo (a.nc);
	echo ("<p>");
	for (i=0; i<a.nl; i++)
	{
		for (j=0; j<a.nc; j++)
		{
			echo (" ");
			echo (a[i][j]);
		}
		echo ("<br>");
	}
	a2 = add_mat (a, a);
	echo ("ord a2 = "); echo (a2.nl); 
	print_mat (a2);
	ta = transpose_mat (a);
	echo ("<p>Transposée : ");
	print_mat (ta);
	p = prod_mat (a, ta);
	echo ("<p>Produit :");
	print_mat (p);
}

echo ("Test: ");
test();

</script>

</body>
</HTML>

